<template>
    <svg ref="refSvg" :viewBox="viewBox" :width="props.width" :height="props.height">
        <g ref="refGRoot">
            <text ref="refText" :fill="props.color" alignment-baseline="hanging" text-anchor="right" font-family="Nunito">
                {{ props.text }}
            </text>
        </g>
    </svg>
</template>

<script setup lang="ts">

import { computed, onMounted, onUpdated, ref, type Ref } from 'vue'
import { useGetViewboxFitToContent } from './svgDirectives';

////////////////////////////////////////////////////////////////////////////
// Props
////////////////////////////////////////////////////////////////////////////

const props = defineProps({
    text: String,
    height: Number,
    width: Number,
    color: String,
})

////////////////////////////////////////////////////////////////////////////
// Template Refs
////////////////////////////////////////////////////////////////////////////

const refSvg: Ref<SVGSVGElement | null> = ref(null);
const refGRoot: Ref<SVGGElement | null> = ref(null);
const refText: Ref<SVGTextElement | null> = ref(null);

////////////////////////////////////////////////////////////////////////////
// Refs and Computed values
////////////////////////////////////////////////////////////////////////////

const { viewBox, updateViewbox } = useGetViewboxFitToContent(refGRoot);

////////////////////////////////////////////////////////////////////////////
// Helper functions
////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////
// Lifecycle hooks
////////////////////////////////////////////////////////////////////////////

onMounted(() => {
    updateViewbox();
})

onUpdated(() => {
    // updateViewbox();
})

</script>

<style scoped></style>